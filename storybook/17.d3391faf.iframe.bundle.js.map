{"version":3,"sources":["webpack:///../packages/feature/src/isFeatureEnabled.js","webpack:///../packages/feature/src/Feature.js"],"names":["featureCache","getFeatureCache","features","axios","get","data","envFeatures","length","featuresSets","Array","isArray","some","featureSet","every","feature","indexOf","isFeatureEnabled","Feature","loader","whenDisabled","children","negate","useState","loading","setLoading","enabled","setEnabled","useEffectAsync","_enabled","blocking","propTypes","PropTypes","oneOfType","arrayOf","string","isRequired","bool","node","defaultProps"],"mappings":"mvBAEIA,a,25BAEG,IAAMC,gBAAkB,SAAlBA,kBAAkB,OAAMD,c,iGAErC,iBAAgCE,UAAhC,kJACEF,aAAeA,cAAgBG,gBAAMC,IAAI,iBAD3C,gCAKyBJ,aALzB,oCAKuCK,KALvC,+CAK+C,GAL/C,OAKIC,YALJ,2HAOW,GAPX,WAUOA,aAAgBA,YAAYC,OAVnC,yDAWW,GAXX,eAcQC,aAAeC,MAAMC,QAAQR,UAAYA,SAAW,CAACA,UAd7D,yBAgBSM,aAAaG,MAAK,SAACC,YACxB,OAAIH,MAAMC,QAAQE,YACTA,WAAWC,OAAM,SAACC,SAAD,OAA+C,IAAlCR,YAAYS,QAAQD,aAEf,IAArCR,YAAYS,QAAQH,gBApB/B,wE,sBAwBeI,yB,SAxBAA,iB,82DCCf,IAAMC,gBAAU,SAAVA,QAAW,MAAyD,IAAvDf,SAAuD,KAAvDA,SAAUgB,OAA6C,KAA7CA,OAAQC,aAAqC,KAArCA,aAAcC,SAAuB,KAAvBA,SAAUC,OAAa,KAAbA,OAC3D,0BAA8BC,wBAAS,GAAvC,GAAOC,QAAP,cAAgBC,WAAhB,cACA,0BAA8BF,uBAAS,MAAvC,GAAOG,QAAP,cAAgBC,WAAhB,cAYA,OAVAC,gBAAc,kDAAC,qJACRJ,SAASC,YAAW,GADZ,gBAGUR,qBAAiBd,UAH3B,OAGP0B,SAHO,cAKbF,WAAWE,UAEXJ,YAAW,GAPE,wDAQZ,CAACtB,WAEAqB,QACEL,QAA0B,IAAXA,OAAkB,wBAAC,kBAAD,CAASW,UAAQ,IAAMX,OACrD,KAEYO,QAAUJ,OAEtBD,SAGFD,cAGTF,gBAAQa,UAAY,CAClB5B,SAAU6B,qBAAUC,UAAU,CAC5BD,qBAAUE,QAAQF,qBAAUC,UAAU,CAACD,qBAAUE,QAAQF,qBAAUG,QAASH,qBAAUG,UACtFH,qBAAUG,SACTC,WACHjB,OAAQa,qBAAUC,UAAU,CAACD,qBAAUK,KAAML,qBAAUM,OACvDlB,aAAcY,qBAAUM,KACxBjB,SAAUW,qBAAUM,KACpBhB,OAAQU,qBAAUK,MAGpBnB,gBAAQqB,aAAe,CACrBnB,aAAc,KACdC,SAAU,M,umBAGGH,gC","file":"17.d3391faf.iframe.bundle.js","sourcesContent":["import axios from 'axios';\n\nlet featureCache;\n\nexport const getFeatureCache = () => featureCache;\n\nasync function isFeatureEnabled(features) {\n  featureCache = featureCache || axios.get('features.json');\n\n  let envFeatures;\n  try {\n    envFeatures = (await featureCache).data || [];\n  } catch {\n    return true;\n  }\n  // eslint-disable-next-line unicorn/explicit-length-check\n  if (!envFeatures || !envFeatures.length) {\n    return true;\n  }\n\n  const featuresSets = Array.isArray(features) ? features : [features];\n\n  return featuresSets.some((featureSet) => {\n    if (Array.isArray(featureSet)) {\n      return featureSet.every((feature) => envFeatures.indexOf(feature) === -1);\n    }\n    return envFeatures.indexOf(featureSet) === -1;\n  });\n}\n\nexport default isFeatureEnabled;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport BlockUi from 'react-block-ui';\nimport 'react-block-ui/style.css';\nimport { useEffectAsync } from '@availity/hooks';\nimport isFeatureEnabled from './isFeatureEnabled';\n\nconst Feature = ({ features, loader, whenDisabled, children, negate }) => {\n  const [loading, setLoading] = useState(false);\n  const [enabled, setEnabled] = useState(null);\n\n  useEffectAsync(async () => {\n    if (!loading) setLoading(true);\n\n    const _enabled = await isFeatureEnabled(features);\n\n    setEnabled(_enabled);\n\n    setLoading(false);\n  }, [features]);\n\n  if (loading) {\n    if (loader) return loader === true ? <BlockUi blocking /> : loader;\n    return null;\n  }\n  const showChildren = enabled ^ negate; // eslint-disable-line no-bitwise\n  if (showChildren) {\n    return children;\n  }\n\n  return whenDisabled;\n};\n\nFeature.propTypes = {\n  features: PropTypes.oneOfType([\n    PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.string), PropTypes.string])),\n    PropTypes.string,\n  ]).isRequired,\n  loader: PropTypes.oneOfType([PropTypes.bool, PropTypes.node]),\n  whenDisabled: PropTypes.node,\n  children: PropTypes.node,\n  negate: PropTypes.bool,\n};\n\nFeature.defaultProps = {\n  whenDisabled: null,\n  children: null,\n};\n\nexport default Feature;\n"],"sourceRoot":""}