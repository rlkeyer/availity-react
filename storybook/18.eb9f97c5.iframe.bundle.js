(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{2032:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(32),__webpack_require__(13),__webpack_require__(43),__webpack_require__(30),__webpack_require__(33),__webpack_require__(19),__webpack_require__(18),__webpack_require__(21),__webpack_require__(25),__webpack_require__(34),__webpack_require__(16),__webpack_require__(23),__webpack_require__(9),__webpack_require__(12),__webpack_require__(117),__webpack_require__(59),__webpack_require__(220),__webpack_require__(331),__webpack_require__(138),__webpack_require__(94),__webpack_require__(22);var react=__webpack_require__(1),prop_types=__webpack_require__(0),prop_types_default=__webpack_require__.n(prop_types),ModalHeader=__webpack_require__(870),ModalBody=__webpack_require__(871),FormGroup=__webpack_require__(877),ModalFooter=__webpack_require__(872),Button=__webpack_require__(46),src=__webpack_require__(49),packages_form=__webpack_require__(58),packages_select=__webpack_require__(113),es=__webpack_require__(31),formik_esm=(__webpack_require__(72),__webpack_require__(68)),packages_icon=__webpack_require__(174),jsx_runtime=__webpack_require__(2),_excluded=["onClick","icon","active","children","iconSize"];function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var btnStyles={fontSize:"1.4em",padding:".2em .4em"},iconStyles={margin:"0px"},FeedbackButton_FeedbackButton=function FeedbackButton(_ref){var _onClick=_ref.onClick,icon=_ref.icon,active=_ref.active,children=_ref.children,iconSize=_ref.iconSize,rest=_objectWithoutProperties(_ref,_excluded);return Object(jsx_runtime.jsxs)(Button.a,Object.assign({style:btnStyles,color:active===icon?"primary":"light","aria-pressed":active===icon,onClick:function onClick(){_onClick(icon)},onKeyDown:function onKeyDown(_ref2){return 13===_ref2.keyCode&&_onClick(icon)}},rest,{children:[Object(jsx_runtime.jsx)(packages_icon.default,{"data-testid":"feedback-icon",name:icon,size:iconSize,style:iconStyles}),Object(jsx_runtime.jsx)("span",{className:"sr-only",children:children})]}))};FeedbackButton_FeedbackButton.displayName="FeedbackButton",FeedbackButton_FeedbackButton.propTypes={onClick:prop_types.PropTypes.func,icon:prop_types.PropTypes.string,active:prop_types.PropTypes.string,children:prop_types.PropTypes.node,iconSize:prop_types.PropTypes.string},FeedbackButton_FeedbackButton.defaultProps={iconSize:""},FeedbackButton_FeedbackButton.__docgenInfo={description:"",methods:[],displayName:"FeedbackButton",props:{iconSize:{defaultValue:{value:"''",computed:!1},type:{name:"string"},required:!1,description:""},onClick:{type:{name:"func"},required:!1,description:""},icon:{type:{name:"string"},required:!1,description:""},active:{type:{name:"string"},required:!1,description:""},children:{type:{name:"node"},required:!1,description:""}}};var src_FeedbackButton=FeedbackButton_FeedbackButton;function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../packages/feedback/src/FeedbackButton.js"]={name:"FeedbackButton",docgenInfo:FeedbackButton_FeedbackButton.__docgenInfo,path:"../packages/feedback/src/FeedbackButton.js"});var SmileField_btnStyles={flex:1,margin:"0 2% 0 2%"},SmileField_SmileField=function SmileField(_ref){var name=_ref.name,options=_ref.options,onChange=_ref.onChange,autoFocusFeedbackButton=_ref.autoFocusFeedbackButton,value=_slicedToArray(Object(formik_esm.d)(name),1)[0].value,setFieldValue=Object(formik_esm.e)().setFieldValue;return options.map((function(option,i){return Object(jsx_runtime.jsx)(src_FeedbackButton,{autoFocus:0===i&&autoFocusFeedbackButton,style:SmileField_btnStyles,icon:option.icon,iconSize:"2x",value:option,active:value&&value.icon,onClick:function onClick(){setFieldValue(name,option),onChange&&onChange(option)},children:option.description},option.icon)}))};SmileField_SmileField.propTypes={name:prop_types_default.a.string.isRequired,options:prop_types_default.a.arrayOf(prop_types_default.a.shape({icon:prop_types_default.a.string,description:prop_types_default.a.string,label:prop_types_default.a.string})),onChange:prop_types_default.a.func,autoFocusFeedbackButton:prop_types_default.a.bool},SmileField_SmileField.defaultProps={options:[{icon:"smile",description:"Smiley face",label:"What do you like?"},{icon:"meh",description:"Meh face",label:"What would you improve?"},{icon:"frown",description:"Frowny face",label:"What don't you like?"}],autoFocusFeedbackButton:!0};var src_SmileField=SmileField_SmileField,FeedbackForm_excluded=["name","onClose","faceOptions","aboutOptions","aboutLabel","onFeedbackSent","prompt","additionalComments","staticFields","analytics","modalHeaderProps","showSupport","setSupportIsActive","autoFocusFeedbackButton"],_excluded2=["smileField"];function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function FeedbackForm_slicedToArray(arr,i){return function FeedbackForm_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function FeedbackForm_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function FeedbackForm_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return FeedbackForm_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FeedbackForm_arrayLikeToArray(o,minLen)}(arr,i)||function FeedbackForm_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function FeedbackForm_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function FeedbackForm_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function FeedbackForm_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}es.b(es.g,"isRequired",(function format(isRequired,msg){return this.test({name:"dateRange",exclusive:!0,message:msg||"This field is required.",test:function test(value){return!isRequired||void 0!==value}})}));var fieldStyles={resize:"none"},inlineStyles={display:"inline-block",margin:0},FeedbackForm_FeedbackForm=function FeedbackForm(_ref){var name=_ref.name,onClose=_ref.onClose,faceOptions=_ref.faceOptions,aboutOptions=_ref.aboutOptions,aboutLabel=_ref.aboutLabel,onFeedbackSent=_ref.onFeedbackSent,prompt=_ref.prompt,additionalComments=_ref.additionalComments,staticFields=_ref.staticFields,analytics=_ref.analytics,modalHeaderProps=_ref.modalHeaderProps,showSupport=_ref.showSupport,setSupportIsActive=_ref.setSupportIsActive,autoFocusFeedbackButton=_ref.autoFocusFeedbackButton,formProps=FeedbackForm_objectWithoutProperties(_ref,FeedbackForm_excluded),_useState2=FeedbackForm_slicedToArray(Object(react.useState)(null),2),active=_useState2[0],setActive=_useState2[1],_useState4=FeedbackForm_slicedToArray(Object(react.useState)(null),2),sent=_useState4[0],setSent=_useState4[1],sendFeedback=function(){var _ref3=function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(regeneratorRuntime.mark((function _callee(_ref2){var smileField,values,response;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return smileField=_ref2.smileField,values=FeedbackForm_objectWithoutProperties(_ref2,_excluded2),_context.next=3,src.g.getCurrentRegion();case 3:return response=_context.sent,_context.next=6,analytics.info(Object.assign({surveyId:name.replace(/\s/g,"_")+"_Smile_Survey",smileLocation:""+name,smile:"icon-"+smileField.icon,url:window.location.href,region:response.data.regions[0]&&response.data.regions[0].id,userAgent:window.navigator.userAgent,submitTime:new Date},values,staticFields));case 6:setSent(values);case 7:case"end":return _context.stop()}}),_callee)})));return function sendFeedback(_x){return _ref3.apply(this,arguments)}}();return Object(react.useEffect)((function(){sent&&setTimeout((function(){onClose&&onClose(),onFeedbackSent&&(Object.keys(sent).forEach((function(key){return void 0===sent[key]&&delete sent[key]})),onFeedbackSent(Object.assign({active:active.icon},sent)))}),2e3)}),[sent]),sent?Object(jsx_runtime.jsx)(ModalHeader.a,Object.assign({role:"status",id:"feedback-form-header",tabIndex:"0",className:"d-flex justify-content-center"},modalHeaderProps,{children:"Thank you for your feedback."})):Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(ModalHeader.a,Object.assign({id:"feedback-form-header",role:"heading","aria-level":"2",className:"h5",tag:"div"},modalHeaderProps,{children:prompt||"Tell us what you think about "+name})),Object(jsx_runtime.jsxs)(packages_form.e,Object.assign({"aria-label":"Feedback Form","aria-describedby":"feedback-form-header",role:"form",onKeyDown:function onKeyDown(_ref4){return 27===_ref4.keyCode&&onClose()},"data-testid":"feedback-form",initialValues:{"face-options":void 0,additionalFeedback:void 0,feedback:void 0,feedbackApp:void 0,smileField:void 0},validationSchema:es.f().shape({feedback:es.g().max(200,"Feedback cannot exceed 200 characters.").required("This field is required."),additionalFeedback:es.g().max(200,"Additional Feedback cannot exceed 200 characters."),smileField:es.f().shape({icon:es.g().required(),description:es.g(),label:es.g()}).required("This field is required."),feedbackApp:es.g().isRequired(aboutOptions.length>0,"This field is required.")})},formProps,{onSubmit:function onSubmit(values){return sendFeedback(values)},children:[Object(jsx_runtime.jsxs)(ModalBody.a,{children:[Object(jsx_runtime.jsx)(FormGroup.a,{size:"lg",id:"face-options",role:"group","aria-labelledby":"feedback-form-header","data-testid":"face-options",className:"d-flex flex-row justify-content-between",children:Object(jsx_runtime.jsx)(src_SmileField,{options:faceOptions,name:"smileField",onChange:function onChange(option){return setActive(option)},autoFocusFeedbackButton:autoFocusFeedbackButton})}),active?Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[aboutOptions.length>0&&Object(jsx_runtime.jsx)(packages_select.b,{name:"feedbackApp",id:"about-options","data-testid":"about-options",label:aboutLabel,options:aboutOptions}),Object(jsx_runtime.jsx)(packages_form.d,{type:"textarea",name:"feedback",label:active&&active.label||"Feedback? Requests? Defects?",style:fieldStyles,rows:"2"}),additionalComments&&Object(jsx_runtime.jsx)(packages_form.d,{type:"textarea",name:"additionalFeedback",label:"Additional Comments... (Optional)",style:fieldStyles,rows:"2"})]}):null]}),Object(jsx_runtime.jsxs)(ModalFooter.a,{children:[showSupport?Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("span",{className:"d-none d-md-block",style:inlineStyles,children:"Need Help?"}),Object(jsx_runtime.jsx)(Button.a,{className:"pl-0",onClick:function onClick(){return setSupportIsActive(!0)},color:"link",type:"button",onKeyDown:function onKeyDown(_ref5){return 13===_ref5.keyCode&&setSupportIsActive(!0)},children:"Open a support ticket"})]}):null,onClose?Object(jsx_runtime.jsx)(Button.a,{onClick:onClose,color:"secondary",onKeyDown:function onKeyDown(_ref6){return 13===_ref6.keyCode&&onClose()},children:"Close"}):null,Object(jsx_runtime.jsx)(Button.a,{type:"submit",color:"primary",disabled:!active,children:"Send Feedback"})]})]}))]})};FeedbackForm_FeedbackForm.propTypes={name:prop_types_default.a.string.isRequired,onFeedbackSent:prop_types_default.a.func,faceOptions:prop_types_default.a.arrayOf(prop_types_default.a.shape({icon:prop_types_default.a.string,description:prop_types_default.a.string,label:prop_types_default.a.string})),aboutOptions:prop_types_default.a.arrayOf(prop_types_default.a.shape({name:prop_types_default.a.string,value:prop_types_default.a.oneOfType([prop_types_default.a.string,prop_types_default.a.number])})),aboutLabel:prop_types_default.a.node,onClose:prop_types_default.a.func,prompt:prop_types_default.a.string,additionalComments:prop_types_default.a.bool,staticFields:prop_types_default.a.object,modalHeaderProps:prop_types_default.a.shape(Object.assign({},ModalHeader.a.propTypes)),analytics:prop_types_default.a.shape({info:prop_types_default.a.func.isRequired}),showSupport:prop_types_default.a.bool,setSupportIsActive:prop_types_default.a.func,autoFocusFeedbackButton:prop_types_default.a.bool},FeedbackForm_FeedbackForm.defaultProps={aboutOptions:[],aboutLabel:"This is about",additionalComments:!1,modalHeaderProps:{},analytics:src.b,showSupport:!1},FeedbackForm_FeedbackForm.__docgenInfo={description:"",methods:[],displayName:"FeedbackForm",props:{aboutOptions:{defaultValue:{value:"[]",computed:!1},type:{name:"arrayOf",value:{name:"shape",value:{name:{name:"string",required:!1},value:{name:"union",value:[{name:"string"},{name:"number"}],required:!1}}}},required:!1,description:""},aboutLabel:{defaultValue:{value:"'This is about'",computed:!1},type:{name:"node"},required:!1,description:""},additionalComments:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""},modalHeaderProps:{defaultValue:{value:"{}",computed:!1},type:{name:"shape",value:{}},required:!1,description:""},analytics:{defaultValue:{value:"avLogMessagesApi",computed:!0},type:{name:"shape",value:{info:{name:"func",required:!0}}},required:!1,description:""},showSupport:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""},name:{type:{name:"string"},required:!0,description:""},onFeedbackSent:{type:{name:"func"},required:!1,description:""},faceOptions:{type:{name:"arrayOf",value:{name:"shape",value:{icon:{name:"string",required:!1},description:{name:"string",required:!1},label:{name:"string",required:!1}}}},required:!1,description:""},onClose:{type:{name:"func"},required:!1,description:""},prompt:{type:{name:"string"},required:!1,description:""},staticFields:{type:{name:"object"},required:!1,description:""},setSupportIsActive:{type:{name:"func"},required:!1,description:""},autoFocusFeedbackButton:{type:{name:"bool"},required:!1,description:""}}};__webpack_exports__.default=FeedbackForm_FeedbackForm;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../packages/feedback/src/FeedbackForm.js"]={name:"FeedbackForm",docgenInfo:FeedbackForm_FeedbackForm.__docgenInfo,path:"../packages/feedback/src/FeedbackForm.js"})}}]);
//# sourceMappingURL=18.eb9f97c5.iframe.bundle.js.map